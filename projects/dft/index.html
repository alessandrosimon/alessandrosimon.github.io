<!DOCTYPE html>
<html lang="en">
  <!-- Head -->
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <!-- Metadata, OpenGraph and Schema.org -->




<!-- Standard metadata -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>
  
  
    
      cDFT | Alessandro Simon
    
  
</title>
<meta name="author" content="Alessandro Simon">
<meta name="description" content="Classical density functional theory calculations in the browser.">










<!-- Bootstrap & MDB -->
<link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous">

<!-- Bootstrap Table -->


<!-- Fonts & Icons -->
<link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5">
<link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap">

<!-- Code Syntax Highlighting -->
<link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light">



<!-- Styles -->

<!-- pseudocode -->



<link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e">
<link rel="canonical" href="https://alessandrosimon.github.io/projects/dft/">

<!-- Dark Mode -->
<script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script>

  <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark">
  <script>
    initTheme();
  </script>


<!-- GeoJSON support via Leaflet -->


<!-- diff2html -->






  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">
    <!-- Header -->
    <header>
  <!-- Nav Bar -->
  <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation">
    <div class="container">
      
        <a class="navbar-brand title font-weight-lighter" href="/">
          
            
              <span class="font-weight-bold">Alessandro</span>
            
            
            Simon
          
        </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>

      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          

          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">about
              
            </a>
          </li>

          <!-- Other pages -->
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                
                <li class="nav-item ">
                  
                  <a class="nav-link" href="/blog/">blog
                    
                  </a>
                </li>
              
            
          
            
              
                
                <li class="nav-item ">
                  
                  <a class="nav-link" href="/publications/">publications
                    
                  </a>
                </li>
              
            
          
            
              
                
                <li class="nav-item active">
                  
                  <a class="nav-link" href="/projects/">projects
                    
                      <span class="sr-only">(current)</span>
                    
                  </a>
                </li>
              
            
          
            
              
                
                <li class="nav-item ">
                  
                  <a class="nav-link" href="/repositories/">repositories
                    
                  </a>
                </li>
              
            
          
          
            <!-- Search -->
            <li class="nav-item">
              <button id="search-toggle" title="Search" onclick="openSearchModal()">
                <span class="nav-link">ctrl k <i class="ti ti-search"></i></span>
              </button>
            </li>
          
          
            <!-- Toogle theme mode -->
            <li class="toggle-container">
              <button id="light-toggle" title="Change theme">
                <i class="ti ti-sun-moon" id="light-toggle-system"></i>
                <i class="ti ti-moon-filled" id="light-toggle-dark"></i>
                <i class="ti ti-sun-filled" id="light-toggle-light"></i>
              </button>
            </li>
          
        </ul>
      </div>
    </div>
  </nav>
  
    <!-- Scrolling Progress Bar -->
    <progress id="progress" value="0">
      <div class="progress-container">
        <span class="progress-bar"></span>
      </div>
    </progress>
  
</header>


    <!-- Content -->
    <div class="container mt-5" role="main">
      
        

<div class="post">
  <header class="post-header">
    <h1 class="post-title">cDFT</h1>
    <p class="post-description">Classical density functional theory calculations in the browser.</p>
  </header>

  <article>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<div class="container mx-auto">
        <div class="relative w-full flex">
        <!-- <div id="description" class="mt-2 bg-blue-500 w-200 h-24"></div>
        <div id="control" class="fixed right-0 top-0 mt-20 mr-4 bg-white p-4 shadow-lg rounded-lg w-64"> -->
        <div id="description" class="w-4/5 mr-4">
        <p>This is a calculator for the equilibrium density profile of a one-dimensional hard rod
        liquid in one dimension. After setting the bulk density you can start the calculation by clicking on the button. The iterative solution is shown live and the mean difference between
        successive density profiles is shown in the text box.</p>
        <div id="container" class="mt-2 justify-center">
        </div>
        </div>
        <div id="control" class="w-1/5 bg-white p-4 shadow-lg rounded-lg">
            <label for="bulkDensity" class="block text-gray-700 font-bold mb-2">Bulk Density</label>
            <input type="number" id="bulkDensity" class="border border-gray-300 p-2 rounded w-full mb-4" step="0.1">
            <button id="calculateButton" class="bg-blue-500 text-white p-2 rounded w-full mb-6">Calculate</button>
            <label for="iterationDelta" class="block text-gray-700 font-bold mb-2">Picard Iteration Delta</label>
            <input type="text" id="iterationDelta" class="border border-gray-300 p-2 rounded w-full mb-4" readonly>
            <!-- <label for="progressBarC" class="block text-gray-700 font-bold mb-2">Progress</label>
            <progress id="progressBarC" value="6" max="100" class="w-full"></progress>  -->
            </div>
        </div>
</div>
<script type="module">

        import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

        const R = 0.5;
        const N = 1024;
        const L = 10.0;

        function linspace(start, end, n) {
            const delta = (end - start) / (n - 1);
            return Array.from({ length: n }, (_, i) => start + delta * i);
        }

        function mu_id(rho) {
            return Math.log(rho);
        }

        function mu_ex(rho) {
            return (2 * R * rho) / (1.0 - 2 * R * rho) - Math.log(1.0 - 2 * R * rho);
        }

        function where(condition, x, y) {
            return condition.map((cond, i) => (cond ? x[i] : y[i]));
        }


        function FFT(signal, sign = 1) {
            if (signal.length == 1)
                return signal;
            var halfLength = signal.length / 2;
            var even = [];
            var odd = [];
            even.length = halfLength;
            odd.length = halfLength;
            for (var i = 0; i < halfLength; ++i) {
                even[i] = signal[i * 2];
                odd[i] = signal[i * 2 + 1];
            }
            even = FFT(even, sign);
            odd = FFT(odd, sign);
            for (var k = 0; k < halfLength; ++k) {
                if (!(even[k] instanceof Complex))
                    even[k] = new Complex(even[k], 0);
                if (!(odd[k] instanceof Complex))
                    odd[k] = new Complex(odd[k], 0);
                var a = Math.cos(sign * 2 * Math.PI * k / signal.length);
                var b = Math.sin(sign * -2 * Math.PI * k / signal.length);
                //var sigma_k = new Complex(Math.cos(2 * Math.PI * k / signal.length), Math.sin(-2 * Math.PI * k / signal.length));
                var temp_k_real = odd[k].re * a - odd[k].im * b;
                var temp_k_imag = odd[k].re * b + odd[k].im * a;
                var A_k = new Complex(even[k].re + temp_k_real, even[k].im + temp_k_imag);
                var B_k = new Complex(even[k].re - temp_k_real, even[k].im - temp_k_imag);
                signal[k] = A_k;
                signal[k + halfLength] = B_k;
            }


            return signal;
        }



        function Complex(re, im) {
            this.re = re;
            this.im = im || 0.0;
        }

        function fftfreq(n, d = 1.0) {
            const val = 1.0 / (n * d) / L * 2.0 * Math.PI * N;
            const results = Array.from({ length: n }, (_, i) => {
                if (i < Math.floor(n / 2)) {
                    return i * val;
                } else {
                    return (i - n) * val;
                }
            });
            return results;
        }

        function init_kernels() {
            const k = fftfreq(N);
            let w0 = k.map(x => 2 * Math.cos(x * R) / 2.0);
            let w1 = k.map(x => 2 * Math.sin(x * R) / x);
            w1[0] = 2 * R;
            return [k.map((ki, i) => [ki, w0[i]]), k.map((ki, i) => [ki, w1[i]])];
        }

        function fft(input) {
            const n = input.length;
            if (n <= 1) return input;

            const even = fft(input.filter((_, i) => i % 2 === 0));
            const odd = fft(input.filter((_, i) => i % 2 !== 0));

            const T = Array.from({ length: n / 2 }, (_, k) => {
                const t = (2 * Math.PI * k) / n;
                return [Math.cos(t), Math.sin(t)];
            });

            return Array.from({ length: n }, (_, k) => {
                const [cos, sin] = T[k % (n / 2)];
                const [evenRe, evenIm] = even[k % (n / 2)];
                const [oddRe, oddIm] = odd[k % (n / 2)];
                return k < n / 2
                    ? [evenRe + cos * oddRe - sin * oddIm, evenIm + cos * oddIm + sin * oddRe]
                    : [evenRe - cos * oddRe + sin * oddIm, evenIm - cos * oddIm - sin * oddRe];
            });
        }

        function ifft(input) {
            const n = input.length;
            if (n <= 1) return input;

            const even = ifft(input.filter((_, i) => i % 2 === 0));
            const odd = ifft(input.filter((_, i) => i % 2 !== 0));

            const T = Array.from({ length: n / 2 }, (_, k) => {
                const t = (-2 * Math.PI * k) / n;
                return [Math.cos(t), Math.sin(t)];
            });

            return Array.from({ length: n }, (_, k) => {
                const [cos, sin] = T[k % (n / 2)];
                const [evenRe, evenIm] = even[k % (n / 2)];
                const [oddRe, oddIm] = odd[k % (n / 2)];
                return k < n / 2
                    ? [(evenRe + cos * oddRe - sin * oddIm) / n, (evenIm + cos * oddIm + sin * oddRe) / n]
                    : [(evenRe - cos * oddRe + sin * oddIm) / n, (evenIm - cos * oddIm - sin * oddRe) / n];
            });
        }

        function complexArray(arr) {
            return arr.map(x => [x, 0]);
        }

        // function add_plot(container, data) {
        //     const width = 640;
        //     const height = 400;
        //     const marginTop = 20;
        //     const marginRight = 20;
        //     const marginBottom = 30;
        //     const marginLeft = 40;

        //     const x = d3.scaleLinear()
        //         .domain(d3.extent(data, d => d[0]))
        //         .range([marginLeft, width - marginRight]);



        //     const y = d3.scaleLinear()
        //         .domain(d3.extent(data, d => d[1]))
        //         .range([height - marginBottom, marginTop]);

        //     const svg = d3.create("svg")
        //          .attr("width", width)
        //          .attr("height", height);

        //     svg.append("g")
        //         .attr("transform", `translate(0,${height - marginBottom})`)
        //         .call(d3.axisBottom(x));

        //     svg.append("g")
        //         .attr("transform", `translate(${marginLeft},0)`)
        //         .call(d3.axisLeft(y));

        //     container.append(svg.node());
        //     svg.append("path")
        //         .datum(data)
        //         .attr("fill", "none")
        //         .attr("stroke", "steelblue")
        //         .attr("stroke-width", 1.5)
        //         .attr("d", d3.line()
        //             .x(function (d) { return x(d[0]); })
        //             .y(function (d) { return y(d[1]); })
        //         )
        // }

        function add_plot(container, data) {
            // Your implementation of add_plot using D3.js
            d3.select(container).selectAll("*").remove(); // Clear previous plot

            const margin = { top: 20, right: 30, bottom: 30, left: 40 };
            const width = 800 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;

            const svg = d3.select(container).append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const x = d3.scaleLinear()
                .domain(d3.extent(data, d => d[0]))
                .range([0, width]);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d[1])])
                .range([height, 0]);

            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x));

            svg.append("g")
                .call(d3.axisLeft(y));

            svg.append("path")
                .datum(data)
                .attr("fill", "none")
                .attr("stroke", "steelblue")
                .attr("stroke-width", 1.5)
                .attr("d", d3.line()
                    .x(d => x(d[0]))
                    .y(d => y(d[1]))
                );
        }



        function divide(a, b) {
            return a.map((x) => new Complex(x['re'] / b, x['im'] / b));
        }

        const data = linspace(0, 10, 100).map(x => [x, Math.sin(x)]);


        const kern = init_kernels();

        let domain = linspace(0, 10, 1024);
        //let pot = where(domain > 1.0 && domain < L-1, 0.0,1.0);
        let pot = domain.map(x => (x > 1.0 && x < L - 1.0) ? 1.0 : 0.0);


        function c1(rho) {
            rho = rho.slice();
            let rhof = FFT(rho);

            let n0 = rhof.map((x, i) => x['re'] * kern[0][i][1]);
            let n1 = rhof.map((x, i) => x['re'] * kern[1][i][1]);

            n0 = FFT(n0, -1);
            n1 = FFT(n1, -1);

            n0 = divide(n0, N);
            n1 = divide(n1, N);


            let df0 = n1.map(x => -Math.log(1 - x['re']));
            let df1 = n1.map((x, i) => n0[i]['re'] / (1 - n1[i]['re']));

            let fdf0 = FFT(df0);
            let fdf1 = FFT(df1);

            fdf0 = fdf0.map((x, i) => x['re'] * kern[0][i][1]);
            fdf1 = fdf1.map((x, i) => x['re'] * kern[1][i][1]);

            fdf0 = FFT(fdf0, -1);
            fdf1 = FFT(fdf1, -1);

            fdf0 = divide(fdf0, N);
            fdf1 = divide(fdf1, N);

            let res = fdf0.map((x, i) => fdf0[i].re + fdf1[i].re);
            return res;
        }

        //add_plot(container, c1(pot).map((x, i) => [domain[i], x]));

        document.getElementById('calculateButton').addEventListener('click', () => {
            let rho0 = parseFloat(document.getElementById('bulkDensity').value);
            const iterationDelta = document.getElementById('iterationDelta');
            //const progressBar = document.getElementById('progressBarC');


            //const rho = new Array(N).fill(rho0);//pot.map(x => x);
            let rho = new Array(N).fill(0.0);
            for (let j = 0; j < N; j++) {
                rho[j] = rho0 * pot[j];
                //console.log(rho[j], j);
            }

            let muex = mu_ex(rho0);
            let c = new Array(N).fill(0.0);
            let rho_new = new Array(N).fill(0.0);
            const alpha = 0.01;


            // let cout = c1(rho);
            // for (let j = 0; j < N; j++) {
            //         rho_new[j] = rho0 * Math.exp(c[j] + muex) * pot[j];
            //         rho[j] = (1.0 - alpha) * rho[j] + alpha * rho_new[j];
            // }        
            // console.log(rho);

            //console.log(rho)

            // for (let i = 0; i < 1000; i++) {
            //     c = c1(rho);
            //     let delta = 0.0;
            //     for (let j=0; j < N; j++) {
            //         rho_new[j] = rho0 * Math.exp(-c[j] + muex) * pot[j];
            //         rho[j] = (1.0-alpha)*rho[j] + alpha*rho_new[j];
            //         delta += Math.abs(rho[j] - rho_new[j]);
            //     }
            //     //console.log(delta/N);
            //     iterationDelta.value = (delta / N).toFixed(6);

            // }
            // add_plot(container, rho.map((x, i) => [domain[i], x]));
            let i = 0;
            const maxIter = 500;
            function iterate() {
                if (i >= maxIter) {
                    add_plot(container, rho.map((x, i) => [domain[i], x]));
                    return;
                }

                c = c1(rho);
                let delta = 0.0;
                for (let j = 0; j < N; j++) {
                    rho_new[j] = rho0 * Math.exp(-c[j] + muex) * pot[j];
                    rho[j] = (1.0 - alpha) * rho[j] + alpha * rho_new[j];
                    delta += Math.abs(rho[j] - rho_new[j]);
                }
                iterationDelta.value = (delta / N).toExponential(6);
                add_plot(container, rho.map((x, i) => [domain[i], x]));
                //progressBar.value = (i / maxIter) * 100;


                i++;
                setTimeout(iterate, 0);
            }

            iterate();


        });
    </script>


  </article>

  

  
</div>

      
    </div>

    <!-- Footer -->
    
  <footer class="fixed-bottom" role="contentinfo">
    <div class="container mt-0">
      Â© Copyright 2024
      Alessandro
      
      Simon. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>.

      
      
    </div>
  </footer>



    <!-- JavaScripts -->
    <!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
<script src="/assets/js/bootstrap.bundle.min.js"></script>
<!-- <script src="/assets/js/mdb.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    
  <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>


    

    

    

    

    

    

    

    

    

  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script>



<!-- Bootstrap Table -->


<!-- Load Common JS -->
<script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script>
<script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script>
<script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script>

<!-- Jupyter Open External Links New Tab -->
<script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script>



    
  <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>


  <script async src="https://badge.dimensions.ai/badge.js"></script>


    
  
    <!-- MathJax -->
    <script type="text/javascript">
      window.MathJax = {
        tex: {
          tags: 'ams',
        },
      };
    </script>
    <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script>
    <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script>
  


    

    



    
  <!-- Scrolling Progress Bar -->
  <script type="text/javascript">
    /*
     * This JavaScript code has been adapted from the article
     * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar,
     * published on the website https://css-tricks.com on the 7th of May, 2014.
     * Couple of changes were made to the original code to make it compatible
     * with the `al-foio` theme.
     */
    const progressBar = $('#progress');
    /*
     * We set up the bar after all elements are done loading.
     * In some cases, if the images in the page are larger than the intended
     * size they'll have on the page, they'll be resized via CSS to accomodate
     * the desired size. This mistake, however, breaks the computations as the
     * scroll size is computed as soon as the elements finish loading.
     * To account for this, a minimal delay was introduced before computing the
     * values.
     */
    window.onload = function () {
      setTimeout(progressBarSetup, 50);
    };
    /*
     * We set up the bar according to the browser.
     * If the browser supports the progress element we use that.
     * Otherwise, we resize the bar thru CSS styling
     */
    function progressBarSetup() {
      if ('max' in document.createElement('progress')) {
        initializeProgressElement();
        $(document).on('scroll', function () {
          progressBar.attr({ value: getCurrentScrollPosition() });
        });
        $(window).on('resize', initializeProgressElement);
      } else {
        resizeProgressBar();
        $(document).on('scroll', resizeProgressBar);
        $(window).on('resize', resizeProgressBar);
      }
    }
    /*
     * The vertical scroll position is the same as the number of pixels that
     * are hidden from view above the scrollable area. Thus, a value > 0 is
     * how much the user has scrolled from the top
     */
    function getCurrentScrollPosition() {
      return $(window).scrollTop();
    }

    function initializeProgressElement() {
      let navbarHeight = $('#navbar').outerHeight(true);
      $('body').css({ 'padding-top': navbarHeight });
      $('progress-container').css({ 'padding-top': navbarHeight });
      progressBar.css({ top: navbarHeight });
      progressBar.attr({
        max: getDistanceToScroll(),
        value: getCurrentScrollPosition(),
      });
    }
    /*
     * The offset between the html document height and the browser viewport
     * height will be greater than zero if vertical scroll is possible.
     * This is the distance the user can scroll
     */
    function getDistanceToScroll() {
      return $(document).height() - $(window).height();
    }

    function resizeProgressBar() {
      progressBar.css({ width: getWidthPercentage() + '%' });
    }
    // The scroll ratio equals the percentage to resize the bar
    function getWidthPercentage() {
      return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
    }
  </script>


    

    

    

    
  <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script>
  <script>
    addBackToTop();
  </script>


    
  <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script>
  <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys>
  <script>
    let searchTheme = determineComputedTheme();
    const ninjaKeys = document.querySelector('ninja-keys');

    if (searchTheme === 'dark') {
      ninjaKeys.classList.add('dark');
    } else {
      ninjaKeys.classList.remove('dark');
    }

    const openSearchModal = () => {
      // collapse navbarNav if expanded on mobile
      const $navbarNav = $('#navbarNav');
      if ($navbarNav.hasClass('show')) {
        $navbarNav.collapse('hide');
      }
      ninjaKeys.open();
    };
  </script>
  <script>
    // get the ninja-keys element
    const ninja = document.querySelector('ninja-keys');

    // add the home and posts menu items
    ninja.data = [{
        id: "nav-about",
        title: "about",
        section: "Navigation",
        handler: () => {
          window.location.href = "/";
        },
      },{id: "nav-blog",
              title: "blog",
              description: "",
              section: "Navigation",
              handler: () => {
                window.location.href = "/blog/";
              },
            },{id: "nav-publications",
              title: "publications",
              description: "publications by categories in reversed chronological order.",
              section: "Navigation",
              handler: () => {
                window.location.href = "/publications/";
              },
            },{id: "nav-projects",
              title: "projects",
              description: "A growing collection of your cool projects.",
              section: "Navigation",
              handler: () => {
                window.location.href = "/projects/";
              },
            },{id: "nav-repositories",
              title: "repositories",
              description: "",
              section: "Navigation",
              handler: () => {
                window.location.href = "/repositories/";
              },
            },{id: "news-a-simple-inline-announcement",
              title: 'A simple inline announcement.',
              description: "",
              section: "News",},{id: "news-a-long-announcement-with-details",
              title: 'A long announcement with details',
              description: "",
              section: "News",handler: () => {
                  window.location.href = "/news/announcement_2/";
                },},{id: "news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",
              title: 'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',
              description: "",
              section: "News",},{id: "projects-cdft",
              title: 'cDFT',
              description: "Classical density functional theory calculations in the browser.",
              section: "Projects",handler: () => {
                  window.location.href = "/projects/dft/";
                },},{
            id: 'socials-email',
            title: 'Send email',
            section: 'Socials',
            handler: () => {
              window.open("mailto:%61%6C%65%73%73%61%6E%64%72%6F%35%34%35%33@%67%6D%61%69%6C.%63%6F%6D", "_blank");
            },
          },{
            id: 'socials-google-scholar',
            title: 'Google Scholar',
            section: 'Socials',
            handler: () => {
              window.open("https://scholar.google.com/citations?user=EBn1bQ8AAAAJ", "_blank");
            },
          },{
            id: 'socials-github',
            title: 'GitHub',
            section: 'Socials',
            handler: () => {
              window.open("https://github.com/alessandrosimon# your GitHub user name", "_blank");
            },
          },{
          id: 'light-theme',
          title: 'Change theme to light',
          description: 'Change the theme of the site to Light',
          section: 'Theme',
          handler: () => {
            setThemeSetting("light");
          },
        },
        {
          id: 'dark-theme',
          title: 'Change theme to dark',
          description: 'Change the theme of the site to Dark',
          section: 'Theme',
          handler: () => {
            setThemeSetting("dark");
          },
        },
        {
          id: 'system-theme',
          title: 'Use system default theme',
          description: 'Change the theme of the site to System Default',
          section: 'Theme',
          handler: () => {
            setThemeSetting("system");
          },
        },];
  </script>
  <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script>


  </body>
</html>
